<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>حاسبة المعدل – الجامعة الهاشمية</title>
<style>
:root{
  --bg:#f4f4f9;
  --card:#fff;
  --text:#111;
  --accent:#1e88e5;
  --input:#f0f0f5;
}
body{
  font-family:sans-serif;
  background: var(--bg);
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:20px;
  color: var(--text);
}
h1{
  margin-bottom:20px;
  color: var(--accent);
  text-align:center;
}
.card{
  background: var(--card);
  padding:20px;
  border-radius:10px;
  box-shadow: 0 6px 15px rgba(0,0,0,0.1);
  max-width:700px;
  width:100%;
  margin-bottom:20px;
}
label{
  display:block;
  margin-top:10px;
}
input, select{
  width:100%;
  padding:8px;
  margin-top:5px;
  border-radius:5px;
  border:1px solid #ccc;
  background: var(--input);
}
button{
  margin-top:15px;
  padding:10px 15px;
  background: var(--accent);
  color:#fff;
  border:none;
  border-radius:5px;
  cursor:pointer;
}
table{
  width:100%;
  margin-top:15px;
  border-collapse: collapse;
}
table, th, td{
  border:1px solid #ccc;
}
th, td{
  padding:8px;
  text-align:center;
}
#result, #cumulativeResult{
  margin-top:15px;
  font-weight:bold;
  font-size:18px;
  text-align:center;
}
h2{
  margin-top:20px;
  color:var(--accent);
  text-align:center;
}
</style>
</head>
<body>

<h1>حاسبة المعدل – الجامعة الهاشمية (Letter Grades)</h1>

<div class="card">
  <label>عدد المواد في هذا الفصل:</label>
  <input type="number" id="numCourses" min="1" max="20" value="5">
  <button onclick="createTable()">إنشاء جدول المواد</button>

  <form id="coursesForm">
    <table id="coursesTable"></table>
    <button type="button" onclick="calculateGPA()">حساب المعدل الفصلي</button>
    <button type="button" onclick="resetForm()">إعادة الحساب</button>
  </form>
  
  <div id="result"></div>
</div>

<div class="card">
  <h2>المعدل التراكمي</h2>
  <table id="previousSemestersTable">
    <tr>
      <th>رقم الفصل</th>
      <th>المعدل الفصلي</th>
      <th>عدد الساعات</th>
    </tr>
  </table>
  <label>رقم الفصل:</label>
  <input type="number" id="semesterNum" min="1">
  <label>المعدل الفصلي (Letter Grade):</label>
  <input type="text" id="semesterGPA" placeholder="مثال: A, B+, C-">
  <label>عدد الساعات المعتمدة:</label>
  <input type="number" id="semesterCredits" min="1">
  <button onclick="addSemester()">إضافة الفصل</button>
  <button onclick="calculateCumulative()">حساب المعدل التراكمي</button>
  <div id="cumulativeResult"></div>
</div>

<script>
// تحويل Letter Grade إلى نقاط GPA
function letterToPoint(letter){
  const map = {
    "A+":4.00, "A":3.75, "A-":3.50,
    "B+":3.25, "B":3.00, "B-":2.75,
    "C+":2.50, "C":2.25, "C-":2.00,
    "D+":1.75, "D":1.50, "F":0.00
  };
  return map[letter.toUpperCase()] || 0;
}

// ----- إنشاء جدول المواد -----
function createTable(){
  const num = parseInt(document.getElementById("numCourses").value);
  const table = document.getElementById("coursesTable");
  table.innerHTML="<tr><th>المادة</th><th>Letter Grade</th><th>الساعات المعتمدة</th></tr>";
  for(let i=0;i<num;i++){
    const row=document.createElement("tr");
    row.innerHTML = `<td>المادة ${i+1}</td>
                     <td><input type="text" placeholder="A, B+, C-" required></td>
                     <td><input type="number" min="1" max="6" required></td>`;
    table.appendChild(row);
  }
}

// ----- حساب المعدل الفصلي -----
function calculateGPA(){
  const rows = document.querySelectorAll("#coursesTable tr:not(:first-child)");
  let totalPoints=0, totalCredits=0;
  rows.forEach(row=>{
    const grade=row.children[1].querySelector("input").value;
    const credit=parseFloat(row.children[2].querySelector("input").value);
    const point=letterToPoint(grade);
    totalPoints += point*credit;
    totalCredits += credit;
  });
  const gpa=(totalPoints/totalCredits).toFixed(2);
  document.getElementById("result").textContent=`المعدل الفصلي: ${gpa}`;
}

// ----- إعادة الحساب -----
function resetForm(){
  document.getElementById("coursesTable").innerHTML="";
  document.getElementById("result").textContent="";
}

// ----- حساب المعدل التراكمي -----
let semesters=[];
function addSemester(){
  const num=document.getElementById("semesterNum").value;
  const letter=document.getElementById("semesterGPA").value;
  const credits=parseFloat(document.getElementById("semesterCredits").value);
  if(!num || !letter || isNaN(credits)) return alert("يرجى إدخال جميع الحقول");
  const gpa=letterToPoint(letter);
  semesters.push({num,gpa,credits});
  const table=document.getElementById("previousSemestersTable");
  const row=document.createElement("tr");
  row.innerHTML=`<td>${num}</td><td>${letter} (${gpa})</td><td>${credits}</td>`;
  table.appendChild(row);
  document.getElementById("semesterNum").value="";
  document.getElementById("semesterGPA").value="";
  document.getElementById("semesterCredits").value="";
}

function calculateCumulative(){
  let totalPoints=0,totalCredits=0;
  semesters.forEach(s=>{
    totalPoints += s.gpa * s.credits;
    totalCredits += s.credits;
  });
  const cumGPA=(totalPoints/totalCredits).toFixed(2);
  document.getElementById("cumulativeResult").textContent=`المعدل التراكمي: ${cumGPA}`;
}
</script>

</body>
</html>
